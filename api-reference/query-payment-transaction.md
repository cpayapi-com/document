# Query Payment Transaction

[Home](https://github.com/cpayapi-com/document/blob/main/README.md) /
[API Overview](https://github.com/cpayapi-com/document/blob/main/api-reference/overview.md) /
_Query Payment Transaction_


## Description
Retrieve details of a payment transaction by a unique order id.

## Endpoint
- REST API: **GET** `https://live.cpayapi.com/openapi/v1/getOrderDetail`

## Parameters

| Name | Type | Mandatory | Description |
| :---- | :---- | :---- | :---- |
| merchantId | int64 | yes | unique id generated by CPay for partner |
| merchantTradeNo | string(64) | no | unique order id generated by merchant |
| cpayOrderId | string(64) | no | unique order id generated by CPay |
| hash | string(128) | no | ~~deprecated~~, only works for CryptoCurrency |
| sign | string(128) | yes | see [algorithm](https://github.com/cpayapi-com/document/blob/main/api-reference/signature.md) |

> `merchantTradeNo` and `cpayOrderId` can not be empty at the same time.

## Response

| Name | Type | Description |
| :---- | :---- | :---- |
| code | int64 | see [Error Code](https://github.com/cpayapi-com/document/blob/main/api-reference/error-code.md) |
| msg | string | description of `code` |
| traceid | string | unique request id generated by CPay |
| data.orderId | string | unique order id generated by CPay |
| data.merchantId | int64 | same as request parameter `merchantId` |
| data.orderStatus | int | see [Order Status](https://github.com/cpayapi-com/document/blob/main/api-reference/order-status.md) |
| data.status | string | ~~deprecated~~, replace by `orderStatus` |
| data.currency | string | e.g., USD,EUR,GBP etc. |
| data.orderAmount | string | amount paid by user  |
| data.receivedAmount | string | amount received by merchant's account for this transaction  |
| data.actualAmount | string | ~~deprecated~~ |
| data.pledgeAmount | string | margin amount, only for credit card |
| data.serviceFee | string | commission amount charged by CPay  |
| data.fee | string | ~~deprecated~~, replace by `serviceFee`  |
| data.merchantTradeNo | string | same as request parameter `merchantTradeNo` |
| data.merchantUserId | string | unique user id generated by merchant |
| data.hash | string | ~~deprecated~~, only works for CryptoCurrency |
| data.network | string | ~~deprecated~~, only works for CryptoCurrency |
| data.remark | string | description of the order |
| data.createTime | int64 | transaction created time in CPay (millisecond) |


## Example

```shell
curl 'https://{api-host}/openapi/v1/getOrderDetail?merchantId={merchantId}&merchantTradeNo={merchantTradeNo}&cpayOrderId={cpayOrderId}&sign={sign}'
```

- Order status is `COMPLETED`
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "actualAmount": "95.00",
    "orderAmount": "100.00",
    "createTime": 1663155010000,
    "currency": "USD",
    "fee": "5.00",
    "serviceFee": "5.00",
    "hash": "",
    "merchantId": 20003092,
    "merchantTradeNo": "7b785240e426694635bb09fb101ae241",
    "merchantUserId": "test002",
    "network": "",
    "orderId": "2209141130105863014",
    "pledgeAmount": "10.00",
    "receivedAmount": "95.00",
    "remark": "",
    "orderStatus": 14,
    "status": "14"
  },
  "traceid": "221117082056X6478814"
}
```

- Order status is `PROCESSING`
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "actualAmount": "0.00",
    "orderAmount": "100.00",
    "createTime": 1663155010000,
    "currency": "USD",
    "fee": "0.00",
    "serviceFee": "0.00",
    "hash": "",
    "merchantId": 20003092,
    "merchantTradeNo": "7b785240e426694635bb09fb101ae241",
    "merchantUserId": "test002",
    "network": "",
    "orderId": "2209141130105863014",
    "pledgeAmount": "0.00",
    "receivedAmount": "0.00",
    "remark": "",
    "orderStatus": 11,
    "status": "11"
  },
  "traceid": "221117082056X6478814"
}
```

- Order status is `CLOSED`
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "actualAmount": "0.00",
    "orderAmount": "100.00",
    "createTime": 1663155010000,
    "currency": "USD",
    "fee": "0.00",
    "serviceFee": "0.00",
    "hash": "",
    "merchantId": 20003092,
    "merchantTradeNo": "7b785240e426694635bb09fb101ae241",
    "merchantUserId": "test002",
    "network": "",
    "orderId": "2209141130105863014",
    "pledgeAmount": "0.00",
    "receivedAmount": "0.00",
    "remark": "3DS fail",
    "orderStatus": 15,
    "status": "15"
  },
  "traceid": "221117082056X6478814"
}
```